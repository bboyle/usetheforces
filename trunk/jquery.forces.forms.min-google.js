/*
 GNU GENERAL PUBLIC LICENSE Version 3 <http://www.gnu.org/licenses/gpl.html>
 GNU GENERAL PUBLIC LICENSE Version 3 <http://www.gnu.org/licenses/gpl.html>
 GNU GENERAL PUBLIC LICENSE Version 3 <http://www.gnu.org/licenses/gpl.html>
 GNU GENERAL PUBLIC LICENSE Version 3 <http://www.gnu.org/licenses/gpl.html>
 GNU GENERAL PUBLIC LICENSE Version 3 <http://www.gnu.org/licenses/gpl.html>
 GNU GENERAL PUBLIC LICENSE Version 3 <http://www.gnu.org/licenses/gpl.html>
*/
typeof jQuery!="undefined"&&function(a){var b=a.forces=a.forces||{},f="January February March April May June July August September October November December".split(/ /),g="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(/ /),d=new Date,e=function(c,h,k){for(c=String(c);c.length<h;)c=String(k)+c;return c};b.dateFormat=function(c,h){if(!c)return"";if(!h)return c.toString();return h.replace(/YYYY|yyyy|%Y/,c.getFullYear()).replace(/MM|%m/,e(c.getMonth()+1,2,"0")).replace(/dd|%d/,e(c.getDate(),
2,"0")).replace(/%e/,e(c.getDate(),2," ")).replace(/d/,c.getDate()).replace(/%B/,f[c.getMonth()]).replace(/%A/,g[c.getDay()])};b.dateParse=function(c,h,k){function l(n,p){i[n]=i[n]||p}c=c.split(/[^A-Za-z0-9]/);for(var m=h||k||d,i={},j=0;j<c.length;j++)if(c[j].match(/^\d{4}$/))l("year",c[j]);else if(c[j].match(/^\d{1,2}$/)){var o=i.date?i.month?"year":"month":"date";if(o=="year"&&!i.year){c[j]=(m.getFullYear()+"").substring(0,2)+e(c[j],2,"0");if(h&&h.getFullYear()>c[j])c[j]+=100;else if(k&&k.getFullYear()<
c[j])c[j]-=100;else if(!h&&!k&&c[j]>m.getFullYear()+20)c[j]-=100}l(o,c[j])}if(i.date&&i.month&&i.year){c=new Date(i.year,i.month-1,i.date);if(b.dateEquals(c,i.year,i.month,i.date))return c}return null};b.dateCalc=function(c,h){h=a.extend({year:0,month:0,date:0},h);return new Date(c.getFullYear()+h.year,c.getMonth()+h.month,c.getDate()+h.date)};b.dateEquals=function(c,h,k,l){return c.getMonth()==k-1&&c.getDate()==l&&c.getFullYear()==h};b.dateEndOfMonth=function(c){c=new Date(c.getFullYear(),c.getMonth(),
31);if(c.getDate()!=31){c.setDate(31-c.getDate());c=this.dateCalc(c,{month:-1})}return c};b.DATE_TODAY=function(){return new Date(d.getFullYear(),d.getMonth(),d.getDate())};b.WEEKDAYS=function(){return g.slice()}}(jQuery);typeof jQuery!="undefined"&&function(a){var b=0;(a.forces=a.forces||{}).generateId=function(){return"tf-ID-"+ ++b}}(jQuery);
typeof jQuery!="undefined"&&function(a){var b=a.forces=a.forces||{};a.fn.forces_id=function(f){var g=a(this);if(!f||document.getElementById(f))f=b.generateId();return g.attr("id")||g.attr("id",f).attr("id")}}(jQuery);
typeof jQuery!="undefined"&&function(a){a.forces=a.forces||{};a.fn.scrollTo=function(b){b=a.extend({hash:false,focus:false,distance:1},b);var f=a(this).eq(0);if(b.hash===true)location.hash=f.forces_id();else if(typeof b.hash==="object")location.hash=b.hash.forces_id();if(b.focus===true)f.focus();else typeof b.focus=="object"&&b.focus.focus();if(b.ancestor)f=f.closest(b.ancestor);a("html,body").animate({scrollTop:f.offset().top-b.distance},100);return a(this)};a.fn.shake=function(b){b=a.extend({interval:75,
distance:10,shakes:2},b);for(var f=a(this),g=parseInt(f.css("marginLeft"))||0,d=parseInt(f.css("marginRight"))||0,e=0;e<b.shakes;e++)f.animate({marginLeft:g-b.distance,marginRight:d+b.distance},b.interval).animate({marginLeft:g+b.distance,marginRight:d-b.distance},b.interval);return f.animate({marginLeft:g,marginRight:d},b.interval)}}(jQuery);
typeof jQuery!="undefined"&&function(a){var b=a.forces=a.extend(a.forces||{},{EVENT_XF_DISABLED:"-xf-disabled",EVENT_XF_ENABLED:"-xf-enabled",EVENT_XF_FOCUS_IN:"-xf-focus-in",EVENT_XF_FOCUS_OUT:"-xf-focus-out",EVENT_XF_OPTIONAL:"-xf-optional",EVENT_XF_REQUIRED:"-xf-required",EVENT_XF_VALID:"-xf-valid",EVENT_XF_INVALID:"-xf-invalid",EVENT_XF_VALUE_CHANGED:"-xf-value-changed",EVENT_XF_SUBMIT_DONE:"-xf-submit-done",EVENT_XF_SUBMIT_ERROR:"-xf-submit-error",EVENT_TF_SUBMIT_SUPPRESSED:"-tf-submit-suppressed",
EXPR_HTML_CONTROLS:":text,select,textarea,.xf-select>fieldset,.xf-select1>fieldset",REXP_EMAIL:/^[A-Za-z!#$%&'*+-\/=?^_`{|}~\.]+@[A-Za-z0-9-]*[A-Za-z0-9]+(?:\.[A-Za-z0-9-]*[A-Za-z0-9]+)+$/,REXP_NUMBER:/^[0-9]+$/,SUBMIT_TOLERANCE:1E4});a.extend(a.expr[":"],{"-tf-not-validated":function(d){return(a(d).data("-tf-FLAGS")&48)==0},"-tf-validated":function(d){return(a(d).data("-tf-FLAGS")&48)!=0},"-xf-empty":function(d){return a.trim(a(d).forces_val()).length==0},"-xf-non-empty":function(d){return a.trim(a(d).forces_val()).length>
0},"-xf-invalid":function(d){return(a(d).data("-tf-FLAGS")&32)==32},"-xf-irrelevant":function(d){return(a(d).data("-tf-FLAGS")&1)==1},"-xf-optional":function(d){return(a(d).data("-tf-FLAGS")&4)==0},"-xf-relevant":function(d){return(a(d).data("-tf-FLAGS")&1)==0},"-xf-required":function(d){return(a(d).data("-tf-FLAGS")&4)==4},"-xf-valid":function(d){return(a(d).data("-tf-FLAGS")&16)==16}});a.fn.forces_attr=function(d,e){if(typeof e=="undefined")return(e=this.data("-tf-@"+d))?e:this.is(":-xf-"+d)?d:
null;switch(d){case "relevant":this.forces__flags(2,e!==true&&e!="relevant");break;case "required":this.forces__flags(8,e===true||e=="required");break;case "type":break;default:return this}return this.data("-tf-@"+d,e===true?d:e).forces_recalculate()};a.fn.forces_removeAttr=function(d){switch(d){case "relevant":this.forces__flags(2,false);break;case "required":this.forces__flags(8,false);break;case "type":break;default:return this}return this.removeData("-tf-@"+d).forces_recalculate()};a.fn.forces_val=
function(){var d=a(this);return d.val()||d.find(":checked").val()||null};a.fn.forces_setCustomValidity=function(d){return a(this).data("-tf-customValidityErrorMessage",d)};a.fn.forces_validity=function(){var d=a(this);return d.data("-tf-validity")||d.data("-tf-validity",{valueMissing:false,typeMismatch:false,valid:true}).data("-tf-validity")};a.fn.forces_recalculate=function(){var d,e,c=function(h,k,l,m){h.forces__flags(k,l).trigger(m)};return this.each(function(){d=a(this);e=d.data("-tf-FLAGS")||
0;switch(e&3){case 2:c(d,1,true,b.EVENT_XF_DISABLED);break;case 1:c(d,1,false,b.EVENT_XF_ENABLED);break}switch(e&12){case 8:c(d,4,true,b.EVENT_XF_REQUIRED);break;case 4:c(d,4,false,b.EVENT_XF_OPTIONAL);break}})};a.fn.forces_validate=function(d){return a(this).filter(function(){var e=a(this),c=e.forces_validity();c.customError=!!e.data("-tf-customValidityErrorMessage");c.valueMissing=e.is(":-xf-required:-xf-empty");var h=a.trim(e.forces_val());if(h)switch(e.forces_attr("type")){case "email":c.typeMismatch=
!b.REXP_EMAIL.exec(h);break;case "date":c.typeMismatch=b.dateParse(h)==null;break;case "number":c.typeMismatch=!b.REXP_NUMBER.exec(h);break;default:c.typeMismatch=false}else c.typeMismatch=false;c.valid=!(c.valueMissing||c.customError||c.typeMismatch);c.valid?e.forces__flags(32,false).forces__flags(16,true).trigger(b.EVENT_XF_VALID):e.forces__flags(16,false).forces__flags(32,true).trigger(b.EVENT_XF_INVALID);return d===undefined||d===c.valid})};a.fn.forces__flags=function(d,e){var c;this.set=function(){c=
a(this);c.data("-tf-FLAGS",c.data("-tf-FLAGS")|d)};this.unset=function(){c=a(this);c.data("-tf-FLAGS",c.data("-tf-FLAGS")&~d)};return e?this.each(this.set):this.each(this.unset)};var f=function(d){var e=a(this);if(e.data("-tf-submitted")&&d.timeStamp-e.data("-tf-submitted")<b.SUBMIT_TOLERANCE){d.stopImmediatePropagation();e.trigger(b.EVENT_TF_SUBMIT_SUPPRESSED);return false}e.data("-tf-submitted",d.timeStamp);d=e.find("fieldset:-xf-irrelevant").find(b.EXPR_HTML_CONTROLS);if(e.find(b.EXPR_HTML_CONTROLS).filter(":-xf-relevant").not(d).forces_validate(false).length){e.trigger(b.EVENT_XF_SUBMIT_ERROR);
e.removeData("-tf-submitted");return false}e.trigger(b.EVENT_XF_SUBMIT_DONE);return true},g=function(d){var e=a(d.target);switch(d.type){case "click":case "focus":case "mousedown":e.data("-tf-VALUE",e.val()).trigger(b.EVENT_XF_FOCUS_IN);break;case "blur":d=e.data("-tf-VALUE");e.removeData("-tf-VALUE").trigger(b.EVENT_XF_FOCUS_OUT);e.val()!==d&&e.trigger(b.EVENT_XF_VALUE_CHANGED).forces_validate();break}};a.fn.forces_enable=function(d){b.toggleFormHandlers(d,a(this))};b.toggleFormHandlers=function(d,
e){e=e||a("form");if(d||d===undefined){e.bind("submit",f);a("input,select,textarea",e).bind("focus blur click mousedown",g)}else{e.unbind("submit",f);a("input,select,textarea",e).unbind("focus blur click mousedown",g)}}}(jQuery);
typeof jQuery!="undefined"&&function(a){var b=a.forces=a.extend(a.forces||{},{CSS_ACTIVE:"tf-active",CSS_ALERT:"xf-alert",CSS_HINT:"xf-hint",CSS_INVALID:"xf-invalid",CSS_MISSING:"tf-missing",CSS_REQUIRED:"xf-required",CSS_SUBMIT_DONE:"xf-submit-done",CSS_SUBMIT_ERROR:"xf-submit-error",CSS_VALID:"xf-valid",MSG_INVALID:"is invalid",MSG_TYPE_MISMATCH:{date:"unrecognised date format",email:"must contain an email address",number:"must contain only digits"},MSG_MISSING:"must be completed",MSG_SUBMIT_ERROR:"Unable to process this form",
HTML_ALERT_INLINE:function(f){return a("<em></em>").addClass(this.CSS_ALERT).text(f)},HTML_HINT_INLINE:function(f){return a('<small class="xf-hint"></small>').addClass(this.CSS_HINT).text(f)},HTML_REQUIRED:function(){return a(document.createElement("abbr")).addClass(this.CSS_REQUIRED).attr("title","required").text("*")},HTML_STATUS:function(){return a('<div class="tf-status"><div class="tf-alert inner"><h1>'+this.MSG_SUBMIT_ERROR+"</h1><ol></ol></div></div>")},HTML_STATUS_ID:"tf-status-alert",MS_ENABLE:300,
MS_DISABLE:0});a.extend(a.expr[":"],{"-tf-form":function(f){return a(f).is(".tf-form")},"-xf-control":function(f){return a(f).is(".xf-input,.xf-select,.xf-select1,.xf-textarea")},"-xf-group":function(f){return a(f).is(".xf-group")},"-xf-label":function(f){return a(f).is(".xf-label")}});a.fn.forces_alert=function(f){var g=a(this),d=g.closest(":-xf-control");d.find(".xf-alert").remove();d.each(function(){var e=a(this).children("fieldset").andSelf().eq(0),c=f||e.forces_validationMessage();c&&e.append(b.HTML_ALERT_INLINE(c))});
return g};a.fn.forces_hint=function(f){var g=a(this),d=g.closest(":-xf-control");d.find(".xf-hint").remove();f&&d.find(".xf-label").parent().append(b.HTML_HINT_INLINE(f));return g};a.fn.forces_label=function(){return a(this).closest(":-xf-control").find(":-xf-label").text()};a.fn.forces_validationMessage=function(){var f=a(this).find(b.EXPR_HTML_CONTROLS).andSelf().eq(0),g=f.forces_validity();if(g.valid)return"";else if(g.customError)return f.data("-tf-customValidityErrorMessage");else if(g.valueMissing)return b.MSG_MISSING;
else if(g.typeMismatch)return b.MSG_TYPE_MISMATCH[f.forces_attr("type")]};a(":-xf-control").live(b.EVENT_XF_REQUIRED,function(){a(this).find(".xf-required").remove().end().find(":-xf-label").after(b.HTML_REQUIRED())}).live(b.EVENT_XF_OPTIONAL,function(){a(this).removeClass(b.CSS_MISSING).find(".xf-required").remove()}).live(b.EVENT_XF_VALID,function(){a(this).forces_alert().removeClass(b.CSS_INVALID).addClass(b.CSS_VALID)}).live(b.EVENT_XF_INVALID,function(){a(this).removeClass(b.CSS_VALID).addClass(b.CSS_INVALID).forces_alert()}).live(b.EVENT_XF_FOCUS_IN,
function(){var f=a(this),g=f.closest(":-xf-group");f.closest("form").find("."+b.CSS_ACTIVE).not(f,g).removeClass(b.CSS_ACTIVE);f.add(g).addClass(b.CSS_ACTIVE)});a(":-xf-control, :-xf-group, .section").live(b.EVENT_XF_ENABLED,function(){a(this).find(b.EXPR_HTML_CONTROLS).each(function(){this.removeAttribute("disabled")}).end().stop(true,true).slideDown(b.MS_ENABLE)}).live(b.EVENT_XF_DISABLED,function(){a(this).find(b.EXPR_HTML_CONTROLS).each(function(){this.setAttribute("disabled","disabled")}).end().stop(true,
true).hide(b.MS_DISABLE)});a(":-tf-form").live(b.EVENT_XF_SUBMIT_ERROR,function(){var f=a(this),g=f.find(b.EXPR_HTML_CONTROLS).not(a("fieldset:-xf-irrelevant").find(b.EXPR_HTML_CONTROLS)),d=f.data("-tfui-status");if(!d){d=f.data("-tfui-status",b.HTML_STATUS()).data("-tfui-status");f.prev(".tf-status").children(".tf-alert").end().remove()}var e=a("<ol></ol>");g=g.filter(":-xf-invalid");g.length&&g.each(function(){var c=a(this);c=a('<a href="#'+c.forces_id()+'">'+c.forces_label().replace(/[?:]*$/,": ")+
c.forces_validationMessage()+"</a>");e.append(a("<li></li>").append(c))});f.addClass(b.CSS_SUBMIT_ERROR).before(d.find("ol").replaceWith(e).end().fadeIn(300));d.forces_id(this.HTML_STATUS_ID);d.scrollTo({hash:true,focus:true})}).live(b.EVENT_TF_SUBMIT_SUPPRESSED,function(){a(this).find(":submit").shake({interval:75,distance:4,shakes:2})}).live(b.EVENT_XF_SUBMIT_DONE,function(){var f=a(this);f.data("-tfui-status")&&f.data("-tfui-status").remove();f.removeClass(b.CSS_SUBMIT_ERROR).addClass(b.CSS_SUBMIT_DONE)});
a(".tf-alert a").live("click",function(){var f=a(this).attr("href");if(f.indexOf("#")<0)return true;a(f.substring(f.indexOf("#"))).scrollTo({ancestor:":-xf-control",hash:true,focus:true});return false});a(".usetheforces").forces_enable(true);a(".xf-required").closest(":-xf-control").find(b.EXPR_HTML_CONTROLS).forces_attr("required",true)}(jQuery);
