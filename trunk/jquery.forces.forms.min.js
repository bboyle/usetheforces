if(typeof(jQuery)!="undefined"){(function(g){var h=g.forces=g.forces||{};var b="January February March April May June July August September October November December".split(/ /);var e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(/ /);var f=new Date();var i=function(m,k,n){m=String(m);while(m.length<k){m=String(n)+m}return m};h.dateFormat=function(k,l){if(!k){return""}if(!l){return k.toString()}return l.replace(/YYYY|yyyy|%Y/,k.getFullYear()).replace(/MM|%m/,i(k.getMonth()+1,2,"0")).replace(/dd|%d/,i(k.getDate(),2,"0")).replace(/%e/,i(k.getDate(),2," ")).replace(/d/,k.getDate()).replace(/%B/,b[k.getMonth()]).replace(/%A/,e[k.getDay()])};h.dateParse=function(t,m,p){t=t.split(/[^A-Za-z0-9]/);var k=m||p||f;var l={};function q(u,s){l[u]=l[u]||s}for(var n=0;n<t.length;n++){if(t[n].match(/^\d{4}$/)){q("year",t[n])}else{if(t[n].match(/^\d{1,2}$/)){var r=l.date?(l.month?"year":"month"):"date";if(r=="year"&&!l.year){t[n]=(k.getFullYear()+"").substring(0,2)+i(t[n],2,"0");if(m&&m.getFullYear()>t[n]){t[n]+=100}else{if(p&&p.getFullYear()<t[n]){t[n]-=100}else{if(!m&&!p&&t[n]>k.getFullYear()+20){t[n]-=100}}}}q(r,t[n])}}}if(l.date&&l.month&&l.year){var o=new Date(l.year,l.month-1,l.date);if(h.dateEquals(o,l.year,l.month,l.date)){return o}}return null};h.dateCalc=function(k,l){return new Date(k.getFullYear()+(l.year||0),k.getMonth()+(l.month||0),k.getDate()+(l.date||0))};h.dateEquals=function(l,o,k,n){return(l.getMonth()==k-1&&l.getDate()==n&&l.getFullYear()==o)};h.DATE_TODAY=function(){return new Date(f.getFullYear(),f.getMonth(),f.getDate())};var c=h.EVENT_REQUIRED="-xf-required";var d=h.EVENT_OPTIONAL="-xf-optional";var a=h.EVENT_RELEVANT="-xf-relevant";var j=h.EVENT_IRRELEVANT="-xf-irrelevant";g.extend(g.expr[":"],{"-tf-irrelevant":function(k){return(g(k).data("-tf-FLAGS")&1)!=0},"-tf-relevant":function(k){return(g(k).data("-tf-FLAGS")&1)==0},"-tf-required":function(k){return(g(k).data("-tf-FLAGS")&4)!=0}});g.fn.forces_attr=function(k,l){if(typeof(l)=="undefined"){l=this.data("-tf-@"+k);return l?l:(this.is(":-tf-"+k)?k:null)}switch(k){case"relevant":this.forces__flags(2,l!==true&&l!="relevant");break;case"required":this.forces__flags(8,l===true||l=="required");break;default:return this}return this.data("-tf-@"+k,l===true?k:l).forces_recalculate()};g.fn.forces_removeAttr=function(k){switch(k){case"relevant":this.forces__flags(2,false);break;case"required":this.forces__flags(8,false);break;default:return this}return this.removeData("-tf-@"+k).forces_recalculate()};g.fn.forces_recalculate=function(){var l,k=0,n=g(document);var m=function(q,o,r,p){q.forces__flags(o,r);n.trigger(p,[q])};return this.each(function(){l=g(this);k=l.data("-tf-FLAGS");switch(k&3){case 2:m(l,1,true,j);break;case 1:m(l,1,false,a);break}switch(k&12){case 8:m(l,4,true,c);break;case 4:m(l,4,false,d);break}})};g.fn.forces__flags=function(k,m){var l;this.set=function(){l=g(this);l.data("-tf-FLAGS",l.data("-tf-FLAGS")|k)};this.unset=function(){l=g(this);l.data("-tf-FLAGS",l.data("-tf-FLAGS")&~k)};return m?this.each(this.set):this.each(this.unset)};g(document).bind("submit",function(k){var l=g(k.target);return true});g.extend(g.expr[":"],{"-xf-control":function(k){return g(k).is(".xf-input,.xf-select")},"-xf-label":function(k){return g(k).is(".xf-label")}});g.fn.forces_control=function(){return this.map(function(){var k=g(this);return(k.is(":-xf-control")?k:k.parents(":-xf-control")).get(0)})};g.fn.forces_label=function(){return this.map(function(){var k=g(this);if(k.is(":-xf-label")){return k}if(!k.is(":-xf-control")){k=k.forces_control()}return k.find(".xf-label").get(0)})};g(document).bind(h.EVENT_REQUIRED,function(k,l){l.forces_label().after('<abbr class="xf-required" title="required">*</abbr>')});g(document).bind(h.EVENT_OPTIONAL,function(k,l){l.forces_control().find(".xf-required").remove()})})(jQuery)};