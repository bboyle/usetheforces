/*
 * usetheforces
 * @see http://usetheforces.googlecode.com/
 * @license GNU GENERAL PUBLIC LICENSE Version 3 <http://www.gnu.org/licenses/gpl.html>
 * @requires jQuery
 */
if(typeof(jQuery)!="undefined"){(function(c){var a=c.forces=c.forces||{};var f="January February March April May June July August September October November December".split(/ /);var e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(/ /);var b=new Date();var d=function(h,g,i){h=String(h);while(h.length<g){h=String(i)+h}return h};a.dateFormat=function(g,h){if(!g){return""}if(!h){return g.toString()}return h.replace(/YYYY|yyyy|%Y/,g.getFullYear()).replace(/MM|%m/,d(g.getMonth()+1,2,"0")).replace(/dd|%d/,d(g.getDate(),2,"0")).replace(/%e/,d(g.getDate(),2," ")).replace(/d/,g.getDate()).replace(/%B/,f[g.getMonth()]).replace(/%A/,e[g.getDay()])};a.dateParse=function(p,j,m){p=p.split(/[^A-Za-z0-9]/);var g=j||m||b;var h={};function n(q,i){h[q]=h[q]||i}for(var k=0;k<p.length;k++){if(p[k].match(/^\d{4}$/)){n("year",p[k])}else{if(p[k].match(/^\d{1,2}$/)){var o=h.date?(h.month?"year":"month"):"date";if(o=="year"&&!h.year){p[k]=(g.getFullYear()+"").substring(0,2)+d(p[k],2,"0");if(j&&j.getFullYear()>p[k]){p[k]+=100}else{if(m&&m.getFullYear()<p[k]){p[k]-=100}else{if(!j&&!m&&p[k]>g.getFullYear()+20){p[k]-=100}}}}n(o,p[k])}}}if(h.date&&h.month&&h.year){var l=new Date(h.year,h.month-1,h.date);if(a.dateEquals(l,h.year,h.month,h.date)){return l}}return null};a.dateCalc=function(g,h){return new Date(g.getFullYear()+(h.year||0),g.getMonth()+(h.month||0),g.getDate()+(h.date||0))};a.dateEquals=function(h,j,g,i){return(h.getMonth()==g-1&&h.getDate()==i&&h.getFullYear()==j)};a.DATE_TODAY=function(){return new Date(b.getFullYear(),b.getMonth(),b.getDate())}})(jQuery)}if(typeof(jQuery)!="undefined"){(function(c){var a=c.forces=c.forces||{};var b=0;a.generateId=function(){return"tf-ID-"+ ++b}})(jQuery)}if(typeof(jQuery)!="undefined"){(function(b){var a=b.forces=b.forces||{};b.fn.shake=function(c,h,g){var c=c||250;var h=h||8;var g=g||1;var e=parseInt(b(this).css("marginLeft"));var f=parseInt(b(this).css("marginRight"));for(var d=0;d<g;d++){b(this).animate({marginLeft:e-h,marginRight:f+h},c).animate({marginLeft:e+h,marginRight:f-h},c)}return b(this).animate({marginLeft:e,marginRight:f},c)}})(jQuery)}if(typeof(jQuery)!="undefined"){(function(c){var a=c.forces=c.forces||{};a.EVENT_XF_FOCUS_IN="-xf-focus-in";a.EVENT_XF_FOCUS_OUT="-xf-focus-out";a.EVENT_XF_REQUIRED="-xf-required";a.EVENT_XF_OPTIONAL="-xf-optional";a.EVENT_XF_ENABLED="-xf-enabled";a.EVENT_XF_DISABLED="-xf-disabled";a.EVENT_XF_SUBMIT_ERROR="-xf-submit-error";a.EVENT_XF_SUBMIT_DONE="-xf-submit-done";a.SUBMIT_TOLERANCE=10000;var b="-tf-submitted";c.extend(c.expr[":"],{"-xf-empty":function(d){return c.trim(c(d).val()).length==0},"-xf-irrelevant":function(d){return(c(d).data("-tf-FLAGS")&1)!=0},"-xf-optional":function(d){return(c(d).data("-tf-FLAGS")&4)==0},"-xf-relevant":function(d){return(c(d).data("-tf-FLAGS")&1)==0},"-xf-required":function(d){return(c(d).data("-tf-FLAGS")&4)!=0}});c.fn.forces_attr=function(d,e){if(typeof(e)=="undefined"){e=this.data("-tf-@"+d);return e?e:(this.is(":-xf-"+d)?d:null)}switch(d){case"relevant":this.forces__flags(2,e!==true&&e!="relevant");break;case"required":this.forces__flags(8,e===true||e=="required");break;default:return this}return this.data("-tf-@"+d,e===true?d:e).forces_recalculate()};c.fn.forces_removeAttr=function(d){switch(d){case"relevant":this.forces__flags(2,false);break;case"required":this.forces__flags(8,false);break;default:return this}return this.removeData("-tf-@"+d).forces_recalculate()};c.fn.forces_recalculate=function(){var g,d=0;var h=function(j,f,k,i){j.forces__flags(f,k);j.trigger(i)};return this.each(function(){g=c(this);d=g.data("-tf-FLAGS");switch(d&3){case 2:h(g,1,true,a.EVENT_XF_DISABLED);break;case 1:h(g,1,false,a.EVENT_XF_ENABLED);break}switch(d&12){case 8:h(g,4,true,a.EVENT_XF_REQUIRED);break;case 4:h(g,4,false,a.EVENT_XF_OPTIONAL);break}})};c.fn.forces__flags=function(d,g){var f;this.set=function(){f=c(this);f.data("-tf-FLAGS",f.data("-tf-FLAGS")|d)};this.unset=function(){f=c(this);f.data("-tf-FLAGS",f.data("-tf-FLAGS")&~d)};return g?this.each(this.set):this.each(this.unset)};a.submitHandler=function(d){var e=c(this);if(true){if(e.data(b)&&d.timeStamp-e.data(b)<a.SUBMIT_TOLERANCE){d.stopImmediatePropagation();return false}e.data(b,d.timeStamp);var f=e.find(":text").filter(":-xf-required:-xf-empty");if(f.length){e.trigger(a.EVENT_XF_SUBMIT_ERROR);e.removeData(b);return false}}e.trigger(a.EVENT_XF_SUBMIT_DONE);return true};c("form").live("submit",a.submitHandler);c.fn.forces_enable=function(){c(":input").bind("focus blur",function(d){c(d.target).trigger(d.type=="focus"?a.EVENT_XF_FOCUS_IN:a.EVENT_XF_FOCUS_OUT)})}})(jQuery)}if(typeof(jQuery)!="undefined"){(function(b){var a=b.forces=b.forces||{};a.HTML_REQUIRED='<abbr class="xf-required" title="required">*</abbr>';a.HTML_STATUS='<div class="tf-status"><div class="tf-alert inner"><h1>Unable to submit form</h1><ol></ol></div></div>';a.CSS_SUBMIT_ERROR="xf-submit-error";a.CSS_ACTIVE="tf-active";a.MS_ENABLE=300;a.MS_DISABLE=0;var c="-tfui-status";b.extend(b.expr[":"],{"-tf-form":function(d){return b(d).is(".tf-form")},"-xf-control":function(d){return b(d).is(".xf-input,.xf-select")},"-xf-group":function(d){return b(d).is(".xf-group")},"-xf-label":function(d){return b(d).is(".xf-label")}});b(":-xf-control").live(a.EVENT_XF_REQUIRED,function(){b(this).find(".xf-required").remove().end().find(":-xf-label").after(a.HTML_REQUIRED)}).live(a.EVENT_XF_OPTIONAL,function(){b(this).find(".xf-required").remove()}).live(a.EVENT_XF_ENABLED,function(){b(this).find(":text").each(function(){this.removeAttribute("disabled")}).end().stop(true,true).slideDown(a.MS_ENABLE)}).live(a.EVENT_XF_DISABLED,function(){b(this).find(":text").each(function(){this.setAttribute("disabled","disabled")}).end().stop(true,true).hide(a.MS_DISABLE)}).live(a.EVENT_XF_FOCUS_IN,function(){b(this).addClass(a.CSS_ACTIVE)}).live(a.EVENT_XF_FOCUS_OUT,function(){b(this).removeClass(a.CSS_ACTIVE)});b(":-tf-form").live(a.EVENT_XF_SUBMIT_ERROR,function(){var e=b(this);var d=e.data(c)||e.data(c,b(a.HTML_STATUS)).data(c);var f="";e.addClass(a.CSS_SUBMIT_ERROR).find(":text").filter(":-xf-required:-xf-empty").each(function(){f+="<li>"+b(this).closest(":-xf-control").find(":-xf-label").text()+"</li>"}).end().end().before(d.find("ol").html(f).end().fadeIn(300).shake().focus());location.hash=d.attr("id")||d.attr("id",a.generateId()).attr("id")});b(".usetheforces").forces_enable()})(jQuery)};